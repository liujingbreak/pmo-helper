{"version":3,"sources":["jira.ts"],"names":[],"mappings":"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","file":"jira.js","sourcesContent":["// tslint:disable no-console\nimport fs from 'fs';\nimport * as jsYaml from 'js-yaml';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport pup from 'puppeteer-core';\nimport api from '__api';\nimport { launch } from './puppeteer';\nimport chalk from 'chalk';\nimport log4js from 'log4js';\n\nmoment.locale('zh-cn');\nconst log = log4js.getLogger('jira-helper');\n\nconst DEFAULT_TASK_MODULE_VALUE = '大C线-研发';\n\nexport interface Options {\n  headless: boolean;\n}\nexport interface Issue {\n  brief?: string;\n  name: string;\n  id: string;\n  status: string;\n  desc?: string;\n  ver: string[];\n  assignee: string;\n  tasks?: Issue[];\n  parentId?: string;\n  endDate?: string;\n  est?: number; // estimation duration\n  intEst?: number; // API integration estimation duration\n\n  '+'?: {[assignee: string]: string[]};\n}\n\ntype NewTask = {[key in keyof Issue]?: Issue[key]} & {name: string};\n\nexport async function login() {\n  const browser = await launch(false);\n  const pages = await browser.pages();\n  await pages[0].goto('https://issue.bkjk-inc.com',\n    {timeout: 0, waitUntil: 'domcontentloaded'});\n}\n\n// export await function waitForCondition()\n\nexport async function domToIssues(page: pup.Page,\n  onEachPage?: (trPairs: [Issue, pup.ElementHandle][]) => Promise<void>\n) {\n  let issues: Issue[] = [];\n  let pageIdx = 1;\n  while (true) {\n    log.info('Page %s: %s', pageIdx++, page.url());\n    const currPageIssues = await fetchPage();\n    issues = issues.concat(currPageIssues);\n    const nextPageLink = await page.$('.pagination > a.nav-next');\n    if (nextPageLink == null)\n      break;\n    await nextPageLink.click();\n    // check first cell, wait for its DOM mutation\n\n    const lastFirstRowId = currPageIssues[0].id;\n\n    await page.waitForFunction((originIssueId) => {\n      const td: HTMLElement | null = document.querySelector('#issuetable > tbody > tr > td');\n      return td && td.innerText.length > 0 && td.innerText.trim() !== originIssueId;\n    }, {polling: 'mutation'}, lastFirstRowId);\n    await page.waitFor(500);\n  }\n\n  async function fetchPage() {\n    const trPairs: [Issue, pup.ElementHandle][] = [];\n    const table = await page.$('#issuetable');\n    if (table == null) return [] as Issue[];\n    const cellTitles = await getCellTitles(table);\n    log.info('List headers:',cellTitles.join(', '));\n    const done = await Promise.all(\n      (await table!.$$(':scope > tbody > tr')).map(async row => {\n\n        // Fill title2ValueMap and clsMap\n        const clsMap = await row.$$eval(':scope > td', els => {\n          const colMap: {[k: string]: string} = {};\n          for (let i = 0, l = els.length; i < l; i++) {\n            const el = els[i];\n            const value = (el as HTMLElement).innerText;\n            colMap[el.className] = value;\n          }\n          return colMap;\n        });\n\n        const title2ValueMap: {[title: string]: string} = {};\n\n        (await Promise.all((await row.$$(':scope > td')).map(async td => {\n          return (await td.getProperty('innerText')).jsonValue();\n        }))).forEach((value, i) => title2ValueMap[cellTitles[i++]] = value as string);\n\n        // log.info(util.inspect(title2ValueMap));\n        // log.info(clsMap);\n        const trimedMap: {[k: string]: string} = {};\n        for (const key of Object.keys(clsMap)) {\n          trimedMap[key.trimLeft().split(/[\\n\\r]+/)[0]] = clsMap[key].trim();\n        }\n        // create Issue object\n        const issue: Issue = {\n          name: '',\n          ver: [trimedMap.fixVersions],\n          status: trimedMap.status,\n          assignee: trimedMap.assignee,\n          id: trimedMap.issuekey,\n          endDate: title2ValueMap['End date']\n        };\n        if (onEachPage)\n          trPairs.push([issue, row]);\n\n        // assign issue name and issue parent id\n        const links = await row.$$(':scope > td.summary a.issue-link');\n        if (links.length > 1) {\n          const parentId: string = await (await links[0].getProperty('innerText')).jsonValue() as string;\n          issue.parentId = parentId;\n          issue.name = await (await links[1].getProperty('innerText')).jsonValue() as string;\n        } else {\n          issue.name = await (await links[0].getProperty('innerText')).jsonValue() as string;\n        }\n\n        issue.ver = await Promise.all(\n          (await row.$$(':scope > td.fixVersions > *'))\n          .map(async a => (await a.getProperty('innerText')).jsonValue() as Promise<string>)\n        );\n\n        if (trimedMap.aggregatetimeestimate) {\n          issue.est = estimationToNum(trimedMap.aggregatetimeestimate.trim());\n        }\n        return issue;\n      })\n    );\n    if (onEachPage)\n      await onEachPage(trPairs);\n\n    return done;\n  }\n\n  return issues;\n}\n\nexport async function listStory(\n  // tslint:disable-next-line: max-line-length\n  url = 'https://issue.bkjk-inc.com/issues/?filter=14118') {\n\n  const includeProj = api.argv.include ?\n    new Set<string>((api.argv.include as string).split(',').map(el => el.trim()) ):\n      null;\n  if (includeProj)\n    console.log('include project prfiex: ', includeProj);\n\n  const includeVer = api.argv.includeVersion ?\n    (api.argv.includeVersion + '').split(',').map(el => el.trim().toLocaleLowerCase()) : null;\n\n\n  const browser = await launch(false);\n  const pages = await browser.pages();\n  await pages[0].goto(url, {timeout: 0, waitUntil: 'networkidle2'});\n  await pages[0].waitFor('#issuetable > tbody', {visible: true});\n  // tslint:disable-next-line: no-console\n  log.info('fetching page done');\n  const page = pages[0];\n\n  let issues = await domToIssues(page, forStorys);\n\n  if (includeProj) {\n    issues = issues.filter(issue => {\n      const prefix = issue.id.slice(0, issue.id.indexOf('-'));\n      return includeProj.has(prefix);\n    });\n  }\n\n  if (includeVer) {\n    issues = issues.filter(issue => {\n      // console.log(issue.ver, includeVer);\n      return issue.ver.map(ver => ver.toLowerCase())\n        .some(version => includeVer.some(include => version.indexOf(include) >= 0));\n    });\n  }\n\n\n  log.info('Num of stories:', issues.length);\n\n\n  // for (const issue of issues) {\n  async function forStorys(trPairs: [Issue, pup.ElementHandle][]) {\n    for (const [issue, tr] of trPairs) {\n      const prefix = issue.id.slice(0, issue.id.indexOf('-'));\n      if (includeProj && !includeProj.has(prefix) ||\n        includeVer && !issue.ver.map(ver => ver.toLowerCase())\n          .some(version => includeVer.some(include => version.indexOf(include) >= 0))) {\n        continue;\n      }\n\n      const anchors = await tr.$$(`:scope > .issuekey > a.issue-link[data-issue-key=${issue.id}]`);\n\n      let linkClicked = false;\n      for (const anchor of anchors) {\n        const bx = await anchor.boundingBox();\n\n        if (bx && bx.height > 10 && bx.width > 10) {\n          log.info('Go issue details: ', issue.id);\n          await anchor.click();\n          await page.waitForSelector('.list-view', {hidden: true});\n          issue.tasks = await listSubtasks(page, issue);\n          await page.goBack({waitUntil: 'networkidle0'});\n          linkClicked = true;\n          break;\n        }\n      }\n      if (!linkClicked) {\n        throw new Error(`Can not find link for ${issue.id}`);\n      }\n    }\n  }\n\n  // const grouped = _.groupBy(issues, issue => issue.id.slice(0, issue.id.indexOf('-')));\n  const grouped = _.groupBy(issues, issue => issue.ver && issue.ver.length > 0 ? issue.ver[0] : 'No version');\n\n  fs.writeFileSync(api.config.resolve('rootPath', 'dist/list-story.yaml'), jsYaml.safeDump(grouped));\n  log.info('Result has been written to dist/list-story.yaml');\n\n  await browser.close();\n  // tslint:disable-next-line: no-console\n  console.log('Have a nice day');\n}\n\nexport async function sync(opt: Options, sourceYamlFile?: string) {\n  const browser = await launch(false);\n  const pages = await browser.pages();\n\n  const issueByProj: {[proj: string]: Issue[]} = jsYaml.load(fs.readFileSync(\n    sourceYamlFile ? sourceYamlFile : api.config.resolve('rootPath', 'dist/list-story.yaml'), 'utf8'));\n\n  for (const proj of Object.keys(issueByProj)) {\n    const issues = issueByProj[proj];\n    log.info(issues.length);\n    for (const issue of issues) {\n      if (issue.tasks) {\n        log.info('Check issue', issue.id);\n\n        const tasksWithoutId = issue.tasks\n        .filter(task => task.id == null);\n        // log.info(tasksWithoutId);\n        if (tasksWithoutId.length > 0)\n          await createTasks(issue, tasksWithoutId, pages[0]);\n      }\n      const toAdd = issue['+'];\n      if (toAdd) {\n        const tasks: NewTask[] = [];\n        for (const assignee of Object.keys(toAdd)) {\n          for (const line of toAdd[assignee]) {\n            const [name] = line.split(/[\\r\\n]+/);\n            const desc = line;\n            const item: NewTask = {\n              name,\n              desc,\n              assignee\n            };\n            tasks.push(item);\n          }\n        }\n        await createTasks(issue, tasks, pages[0]);\n      }\n    }\n  }\n  await browser.close();\n}\n\nasync function createTasks(parentIssue: Issue, tasks: NewTask[], page: pup.Page) {\n  await page.goto('https://issue.bkjk-inc.com/browse/' + parentIssue.id,\n    {timeout: 0, waitUntil: 'networkidle2'});\n  const remoteTasks = await listSubtasks(page, parentIssue);\n  parentIssue.ver = await Promise.all((await page.$$('#fixfor-val a'))\n    .map(a => a.getProperty('innerText').then(jh => jh.jsonValue() as Promise<string>)));\n\n  const isHdecor = parentIssue.id.startsWith('HDECOR');\n  const prefix = isHdecor ? '装贝-FE-' : 'FE - ';\n  tasks.forEach(task => {\n    if (!task.name.startsWith(prefix))\n      task.name = prefix + task.name;\n  });\n  const toAdd = _.differenceBy(tasks, remoteTasks, issue => issue.name);\n  log.info('Creating new issue\\n', toAdd);\n\n  for (const item of toAdd) {\n    item.ver = parentIssue.ver;\n    await _addSubTask(page, item);\n  }\n}\n\nasync function _addSubTask(page: pup.Page, task: NewTask) {\n  log.info('adding', task);\n  await clickMoreButton(page, '创建子任务');\n\n  await page.waitFor('#create-subtask-dialog', {visible: true});\n  const dialog = await page.$('#create-subtask-dialog');\n  if (!dialog)\n    throw new Error('Adding issue dialog not found');\n\n  await dialog.$('input[name=summary]')\n    .then(input => input!.type(task.name));\n\n  // const input = await dialog.$('#fixVersions-textarea');\n  // await input!.click();\n  // log.info('version:', task.ver![0]);\n  // await input!.type(task.ver![0], {delay: 100});\n  // await page.keyboard.press('Enter');\n  await dialog.$('#description-wiki-edit').then(el => el!.click());\n  await page.keyboard.type(task.desc ? task.desc : task.name);\n\n  const labels = await dialog.$$('.field-group > label');\n\n  const texts = await Promise.all(\n    labels.map(label => label.getProperty('innerText').then(v => v.jsonValue() as Promise<string>)));\n  const labelMap: {[name: string]: pup.ElementHandle} = {};\n  texts.forEach((text, idx) => labelMap[text.split(/[\\n\\r\\t]+/)[0]] = labels[idx]);\n  // log.info(Object.keys(labelMap));\n\n  const matchName = /[(（]([0-9.]+[dhDH]?)[)）]\\s*$/.exec(task.name);\n  let duration = matchName ? matchName[1] : '0.5d';\n  if (!duration.endsWith('d') && !duration.endsWith('h')) {\n    duration = duration + 'd';\n  }\n  const dates = date();\n  const formValues = {\n    任务提出日期: dates[0],\n    Deadline日期: endDateBaseOnVersion(task.ver![0]) || dates[1],\n    // tslint:disable-next-line: object-literal-key-quotes\n    '初始预估': duration,\n    剩余的估算: duration,\n    经办人: task.assignee || '刘晶'\n  };\n\n  for (const name of Object.keys(labelMap)) {\n    if (name.indexOf('模块') >= 0 && !_.has(formValues, name)) {\n      const id = (await labelMap[name].evaluate(el => el.getAttribute('for')));\n      const inputEl = await page.$('#' + id);\n      const value = await inputEl!.evaluate(el => (el as HTMLTextAreaElement).value);\n      if (value.trim().length === 0) {\n        await inputEl!.click();\n        await page.keyboard.type(DEFAULT_TASK_MODULE_VALUE, {delay: 50});\n      }\n      continue;\n    }\n    if (!_.has(formValues, name))\n      continue;\n    await labelMap[name].click({delay: 50});\n    await new Promise(resolve => setTimeout(resolve, 200));\n    await page.keyboard.type(formValues[name], {delay: 50});\n    if (name === '经办人') {\n      await new Promise(resolve => setTimeout(resolve, 500)); // wait for JIRA searching user\n      await page.keyboard.press('Enter', {delay: 50});\n    }\n  }\n  await dialog.$('#create-issue-submit').then(btn => btn!.click());\n  await page.waitFor('#create-subtask-dialog', {hidden: true});\n\n  await new Promise(resolve => setTimeout(resolve, 1000));\n}\n\nasync function listSubtasks(page: pup.Page, {ver}: {ver: string[]}) {\n  const tasks = await page.$$eval('#view-subtasks #issuetable > tbody > tr', (els, ver) => {\n    return els.map(el => {\n      const name: HTMLElement | null = el.querySelector(':scope > .stsummary > a');\n      const subtask: Issue = {\n        name: name ? name.innerText.trim() : '',\n        id: el.getAttribute('data-issuekey')!,\n        status: (el.querySelector('.status') as HTMLElement).innerText.trim(),\n        ver,\n        // assignee: ''\n        assignee: (el.querySelector('.assignee') as HTMLElement).innerText.trim()\n      };\n      return subtask;\n    });\n  }, ver);\n  return tasks;\n}\n\nexport async function listParent() {\n  const browser = await launch(false);\n  const page = (await browser.pages())[0];\n\n  const storyMap = new Map<string, Issue>();\n  // tslint:disable-next-line: max-line-length\n  await page.goto('https://issue.bkjk-inc.com/issues/?filter=14109',\n    {waitUntil: 'networkidle2'});\n  await domToIssues(page, async rows => {\n    for (const [issue, tr] of rows) {\n      if (issue.parentId) {\n        const link = await tr.$(':scope > td.summary a.issue-link');\n        const pname = await page\n        .evaluate(el => el.getAttribute('title'), link);\n        let pIssue: Issue;\n        if (!storyMap.has(issue.parentId)) {\n          pIssue = {\n            brief: pname,\n            name: pname,\n            id: issue.parentId,\n            status: '',\n            assignee: '',\n            ver: [],\n            est: 0,\n            tasks: []\n          };\n          storyMap.set(issue.parentId, pIssue);\n        } else {\n          pIssue = storyMap.get(issue.parentId)!;\n        }\n        if (/API\\s*联调/i.test(issue.name)) {\n          pIssue.intEst = issue.est;\n        } else {\n          pIssue.est! += issue.est!;\n        }\n        pIssue.tasks!.push(issue);\n      }\n    }\n  });\n\n  console.log('Writted to dist/parent-story.yaml');\n  const stories = Array.from(storyMap.values());\n  fs.writeFileSync('dist/parent-story.yaml', jsYaml.safeDump(stories));\n  console.log(stories.map(story => displayIssue(story)).join('\\n'));\n  browser.close();\n}\n\nfunction date(): [string, string] {\n  const time = moment();\n  // console.log(time.format('D/MMMM/YY'), time.add(21, 'days').format('D/MMMM/YY'));\n  return [time.format('D/MMMM/YY'), time.add(30, 'days').format('D/MMMM/YY')];\n}\n\nfunction estimationToNum(estimationStr: string) {\n  const match = /([0-9.]+)(日|小时|分)/.exec(estimationStr);\n  if (!match) {\n    throw new Error(`Invalide estimation format: ${estimationStr}`);\n  }\n  if (match[2] === '小时') {\n    return parseFloat(match[1]) / 8;\n  } else if (match[2] === '分') {\n    return parseInt(match[1], 10) / 8 / 60;\n  }\n  return parseFloat(match[1]);\n}\n\nfunction displayIssue(issue: Issue): string {\n  return chalk.cyan(issue.id) + ` ${chalk.gray(issue.name)} (${issue.est}) | API int:${issue.intEst || '0'}`;\n}\n\nfunction endDateBaseOnVersion(ver: string) {\n  const verMatch = /(\\d{1,2})(\\d\\d)$/.exec(ver);\n  if (verMatch == null || verMatch[1] == null) {\n    return null;\n  }\n  const time = moment();\n  time.month(parseInt(verMatch[1], 10) - 1);\n  time.date(parseInt(verMatch[2], 10));\n  // time.subtract(5, 'days');\n  if (time.isBefore(new Date())) {\n    time.add(1, 'years');\n  }\n  return time.format('DD/MMMM/YY');\n}\n\nexport function testDate() {\n  console.log(endDateBaseOnVersion('feafa/903'));\n  console.log(moment('15/十月/19', 'DD/MMMM/YY').toDate());\n}\n\n/**\n * Check README.md for command line arguments\n */\nexport async function checkTask(updateVersion?: boolean) {\n  const browser = await launch(false);\n  await browser.newPage();\n  const pages = await browser.pages();\n  const url = 'https://issue.bkjk-inc.com/issues/?filter=14109';\n  await pages[1].goto(url, {timeout: 0, waitUntil: 'networkidle2'});\n\n  const parentSet = new Set<string>();\n  const compareToDate = moment().add(api.argv.endInDays || 3, 'days');\n  log.info('Comparent to end date:', compareToDate.format('YYYY/M/D'));\n\n  await domToIssues(pages[1], async rows => {\n    rows = rows.filter(([task]) => task.status === '开放' || task.status === 'DEVELOPING');\n    parentSet.clear();\n    for (const row of rows) {\n      const [task] = row;\n      // console.log(task);\n      if (task.parentId) {\n        parentSet.add(task.parentId);\n      }\n    }\n\n    const parentMap = await listIssueByIds(pages[0], Array.from(parentSet.values()));\n\n    for (const [task, tr] of rows) {\n      const endDateObj = moment(task.endDate, 'DD/MMMM/YY');\n      if (task.endDate && endDateObj.isBefore(compareToDate)) {\n        // tslint:disable-next-line:max-line-length\n        log.warn(`End date:${task.endDate} \"${displayIssue(task)}\"`);\n        if (api.argv.addDays) {\n          await _editTr(pages[1], tr, {\n            endDate: endDateObj.add(parseInt(api.argv.addDays, 10), 'days').format('DD/MMMM/YY')\n          });\n        }\n      }\n\n      const parent = parentMap.get(task.parentId!);\n      if (parent) {\n        const parentEndDateMom = moment(parent.endDate, 'DD/MMMM/YY');\n        const notSameVersion = task.ver[0] !== parent!.ver[0];\n        const earlierEndDate = endDateObj.isBefore(parentEndDateMom);\n        const verDate = endDateBaseOnVersion(parent.ver[0]);\n\n        const updateToTask: Parameters<typeof _editTr>[2] = {};\n        let needUpdate = false;\n\n        if (notSameVersion) {\n          needUpdate = true;\n          // tslint:disable-next-line: max-line-length\n          log.warn(`Task \"${displayIssue(task)}\"\\n  version \"${task.ver[0]}\" doesn't match parent ${parent.id} \"${parent.ver[0]}\"\\n`);\n          updateToTask.ver = parent.ver;\n        }\n        if (verDate && task.endDate !== verDate) {\n          needUpdate = true;\n          updateToTask.endDate = verDate;\n          // tslint:disable-next-line: max-line-length\n          log.warn(`Task \"${displayIssue(task)}\"\\n  end date \"${task.endDate}\" doesn't match parent version ${parent.id} \"${parent.ver[0]} - ${verDate}\"`);\n        } else if (earlierEndDate) {\n          needUpdate = true;\n          updateToTask.endDate = parent.endDate;\n          // tslint:disable-next-line: max-line-length\n          log.warn(`Task \"${displayIssue(task)}\"\\n  end date \"${task.endDate}\" is earlier than parent ${parent.id} \"${parent.endDate}\"`);\n        }\n\n        if (needUpdate && updateVersion === true || api.argv.updateVersion) {\n          await _editTr(pages[1], tr, updateToTask);\n        }\n      }\n    }\n  });\n  await browser.close();\n}\n\nasync function _editTr(page: pup.Page, tr: pup.ElementHandle, updateTask: {[key in keyof Issue]?: Issue[key]}) {\n  await (await tr.$$(':scope > .summary .issue-link'))[1].click();\n  await editIssue(page, updateTask);\n  await page.goBack();\n  await page.waitFor(800);\n}\n\nasync function editIssue(page: pup.Page, task: Partial<Issue>) {\n  const editButton = await page.waitForSelector('#edit-issue', {visible: true});\n  await editButton.click();\n  const dialog = await page.waitForSelector('#edit-issue-dialog', {visible: true});\n\n  if (task.name) {\n    console.log('change name to ', task.name);\n    await dialog.$('input[name=summary]')\n      .then(input => input!.type(task.name!));\n  }\n\n  if (task.ver && task.ver.length > 0) {\n    console.log('  change version to ', task.ver[0]);\n    const input = await dialog.$('#fixVersions-textarea');\n    await input!.click();\n    for (let i=0; i<5; i++)\n      await input!.press('Backspace', {delay: 150});\n    // await page.waitFor(1000);\n    await input!.type(task.ver[0], {delay: 100});\n    await page.keyboard.press('Enter');\n  }\n\n  if (task.desc != null) {\n    console.log('  change description to', task.desc);\n    await dialog.$('#description-wiki-edit').then(el => el!.click());\n    await page.keyboard.type(task.desc ? task.desc : task.name!);\n  }\n\n  const labels = await dialog.$$('.field-group > label');\n\n  const texts = await Promise.all(\n    labels.map(label => label.getProperty('innerText').then(v => v.jsonValue() as Promise<string>)));\n  const labelMap: {[name: string]: pup.ElementHandle} = {};\n  texts.forEach((text, idx) => labelMap[text.split(/[\\n\\r\\t]+/)[0]] = labels[idx]);\n\n  const dates = date();\n  const formValues = {};\n\n  if (task.ver && task.ver.length > 0)\n    formValues['End date'] = endDateBaseOnVersion(task.ver![0]) || dates[1];\n\n  if (task.endDate)\n    formValues['End date'] = task.endDate;\n\n  for (const name of Object.keys(labelMap)) {\n    if (!_.has(formValues, name))\n      continue;\n    await labelMap[name].click({delay: 50});\n    await new Promise(resolve => setTimeout(resolve, 200));\n    const inputId = '#' + await page.evaluate(label => label.getAttribute('for'), labelMap[name]);\n    // console.log(inputId);\n    const value = await page.$eval(inputId, input => (input as HTMLInputElement).value);\n\n    if (value) {\n      for (let i = 0, l = value.length + 2; i < l; i++)\n        await page.keyboard.press('ArrowRight', {delay: 50});\n      for (let i = 0, l = value.length + 5; i < l; i++)\n        await page.keyboard.press('Backspace', {delay: 50});\n    }\n    console.log('%s: %s -> %s', name, value, formValues[name]);\n    await page.keyboard.type(formValues[name], {delay: 50});\n    // if (name === '经办人') {\n    //   await new Promise(resolve => setTimeout(resolve, 500)); // wait for JIRA searching user\n    //   await page.keyboard.press('Enter', {delay: 50});\n    // }\n  }\n  await (await dialog.$('#edit-issue-submit'))!.click();\n  await page.waitFor('#edit-issue-dialog', {hidden: true});\n  await page.waitFor(1000);\n}\n\nasync function getCellTitles(issueTable: pup.ElementHandle<Element> | null) {\n  if (issueTable == null)\n    return [];\n  const ths = await issueTable.$$(':scope > thead th');\n\n  const titles = await Promise.all(ths.map(async th => {\n    const header = await th.$(':scope > span[title]');\n    if (header) {\n      return (await header.getProperty('innerText')).jsonValue() as Promise<string>;\n    } else {\n      return (await th.getProperty('innerText')).jsonValue() as Promise<string>;\n    }\n  }));\n\n  return titles.map(title => title.trim());\n}\n\nasync function listIssueByIds(page: pup.Page, ids: string[]) {\n  const jql = 'jql=' + encodeURIComponent(`id in (${ids.join(',')})`);\n  await page.goto('https://issue.bkjk-inc.com/issues/?' + jql);\n  const issueMap = (await domToIssues(page)).reduce((map, issue) => {\n    map.set(issue.id, issue);\n    return map;\n  }, new Map<string, Issue>());\n  return issueMap;\n}\n\nexport async function moveIssues(newParentId: string, ...movedIssueIds: string[]) {\n  const browser = await launch();\n  const page = (await browser.pages())[0];\n\n  const parentIssueMap = await listIssueByIds(page, [newParentId]);\n  const parentIssue = parentIssueMap.values().next().value as Issue;\n\n  console.log(parentIssue);\n\n  for (const id of movedIssueIds) {\n    const url = 'https://issue.bkjk-inc.com/browse/' + id;\n    await page.goto(url, {timeout: 0, waitUntil: 'networkidle2'});\n\n    await page.waitFor('#parent_issue_summary', {visible: true});\n    const origParentId = await page.$eval('#parent_issue_summary', el => el.getAttribute('data-issue-key'));\n    if (origParentId !== parentIssue.id) {\n\n      await clickMoreButton(page, '移动');\n      await new Promise(resolve => setTimeout(resolve, 500));\n      // const el = await page.$('html');\n      // const html = (await el!.$eval(':scope > body', el => el.innerHTML));\n      // console.log(html);\n\n      await page.waitFor('#move\\\\.subtask\\\\.parent\\\\.operation\\\\.name_id', {visible: true});\n      await page.click('#move\\\\.subtask\\\\.parent\\\\.operation\\\\.name_id', {delay: 200});\n      await new Promise(resolve => setTimeout(resolve, 200));\n      await page.click('#next_submit', {delay: 200});\n      await page.waitFor('input[name=parentIssue]', {visible: true});\n      const input = await page.$('input[name=parentIssue]');\n      await input!.click();\n      await page.keyboard.sendCharacter(newParentId);\n      await page.click('#reparent_submit', {delay: 200});\n      while (true) {\n        if (page.url().startsWith(url))\n          break;\n        await new Promise(resolve => setTimeout(resolve, 1000));\n      }\n\n      console.log(`${id} is moved to ${newParentId}`);\n    }\n    await editIssue(page, {endDate: parentIssue.endDate, ver: parentIssue.ver});\n    console.log(`${id} is updated`);\n  }\n  await browser.close();\n}\n\nexport async function assignIssues(assignee: string, ...issueIds: string[]) {\n  const browser = await launch();\n  const page = (await browser.pages())[0];\n  const jql = 'jql=' + encodeURIComponent(`id in (${issueIds.join(',')})`);\n  await page.goto('https://issue.bkjk-inc.com/issues/?' + jql);\n  await domToIssues(page, async pairs => {\n    for (const [issue, el] of pairs) {\n      if (issue.assignee === assignee)\n        continue;\n      const links = await el.$$(':scope > td > .issue-link');\n      if (links && links.length > 0) {\n        const link = links[links.length - 1];\n\n        await link.click({delay: 300});\n        await page.waitFor('#assign-issue', {visible: true});\n        await page.click('#assign-issue', {delay: 300});\n        await page.waitFor('#assign-dialog', {visible: true});\n        const input = await page.$('#assignee-field');\n        await editInputText(page, input, assignee);\n        await page.waitFor('body > .ajs-layer', {visible: true});\n        await page.keyboard.press('Enter', {delay: 100});\n        await page.click('#assign-issue-submit', {delay: 100});\n        await page.waitFor('#assign-dialog', {hidden: true});\n        // await new Promise(resolve => setTimeout(resolve, 500));\n        await page.goBack({waitUntil: 'networkidle0'});\n      }\n    }\n  });\n\n\n  await browser.close();\n}\n\nasync function clickMoreButton(page: pup.Page, button: string) {\n  const moreBtn = await page.$('#opsbar-operations_more');\n  if (moreBtn == null)\n    throw new Error('#opsbar-operations_more not found in page'); // click 更多\n\n  await moreBtn!.click({delay: 100});\n  await page.waitFor('#opsbar-operations_more_drop', {visible: true});\n\n  const menuItems = await page.$$('#opsbar-operations_more_drop .trigger-label');\n  for (const item of menuItems) {\n    const text: string = await item.getProperty('innerHTML').then(jh => jh.jsonValue() as Promise<string>);\n    if (text === button) {\n      await new Promise(resolve => setTimeout(resolve, 200));\n      await item.click();\n      break;\n    }\n  }\n}\n\ntype ExtractPromise<V> = V extends Promise<infer E> ? E : unknown;\n\nasync function editInputText(page: pup.Page, inputEl: ExtractPromise<ReturnType<pup.Page['$']>>, newValue: string) {\n  if (inputEl == null)\n    return;\n  const value = await inputEl.evaluate((input: HTMLInputElement) => input.value);\n  await inputEl.click({delay: 300});\n  if (value) {\n    for (let i = 0, l = value.length + 2; i < l; i++)\n      await page.keyboard.press('ArrowRight', {delay: 50});\n    for (let i = 0, l = value.length + 3; i < l; i++)\n      await page.keyboard.press('Backspace', {delay: 50});\n  }\n\n  await page.keyboard.type(newValue, {delay: 50});\n}\n\n"]}