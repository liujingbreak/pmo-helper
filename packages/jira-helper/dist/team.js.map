{"version":3,"sources":["node_modules/@dr/jira-helper/ts/team.ts"],"names":[],"mappings":";;;;AAAA,gDAAgD;AAChD,wDAAkC;AAClC,iCAAmC;AACnC,2CAAmC;AACnC,oDAAoB;AACpB,4DAAuB;AACvB,MAAM,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;AAE5D,MAAM,aAAa,GAAG,4BAA4B,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE;IACzF,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChB,OAAO,GAAG,CAAC;AACb,CAAC,EAAE,IAAI,GAAG,EAAU,CAAC,CAAC;AAItB,SAAsB,UAAU;;QAE9B,MAAM,OAAO,GAAG,MAAM,kBAAM,EAAE,CAAC;QAC/B,MAAM,IAAI,GAAG,CAAC,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACxC,MAAM,IAAI,CAAC,IAAI,CAAC,iDAAiD,EAAE,EAAC,SAAS,EAAE,cAAc,EAAC,CAAC,CAAC;QAEhG,MAAM,MAAM,GAAG,MAAM,kBAAW,CAAC,IAAI,CAAC,CAAC;QAEvC,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;YACrC,MAAM,MAAM,GAAG,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;YACxD,OAAO,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,GAAG,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC,MAAM,UAAU,CAAC,CAAC;QAEvC,MAAM,OAAO,GAAG,gBAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC7D,YAAE,CAAC,aAAa,CAAC,uBAAuB,EAAE,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;QACpE,GAAG,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC;QAE7D,0EAA0E;QAC1E,MAAM,OAAO,CAAC,KAAK,EAAE,CAAC;IACxB,CAAC;CAAA;AArBD,gCAqBC","file":"team.js","sourcesContent":["// import {Page, Browser} from 'puppeteer-core';\nimport * as jsYaml from 'js-yaml';\nimport {domToIssues} from './jira';\nimport {launch} from './puppeteer';\nimport fs from 'fs';\nimport _ from 'lodash';\nconst log = require('log4js').getLogger('jira-helper.team');\n\nconst allowedPrefix = 'HDECOR, BYJ, BCL, MF, ZLZB'.split(/\\s*,\\s*/).reduce((set, prefix) => {\n  set.add(prefix);\n  return set;\n}, new Set<string>());\n\n\n\nexport async function listIssues() {\n\n  const browser = await launch();\n  const page = (await browser.pages())[0];\n  await page.goto('https://issue.bkjk-inc.com/issues/?filter=14126', {waitUntil: 'networkidle2'});\n\n  const issues = await domToIssues(page);\n\n  const filtered = issues.filter(issue => {\n    const prefix = issue.id.slice(0, issue.id.indexOf('-'));\n    return allowedPrefix.has(prefix);\n  });\n\n  log.info(`${filtered.length} issues.`);\n\n  const grouped = _.groupBy(filtered, issue => issue.assignee);\n  fs.writeFileSync('dist/team-issues.yaml', jsYaml.safeDump(grouped));\n  log.info('Result has been written to dist/team-issues.yaml');\n\n  // log.info('Issue prefixes:', Array.from(prefixSet.values()).join(', '));\n  await browser.close();\n}\n"]}